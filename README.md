# ESJ Novel Downloader

ä¸€ä¸ªç”¨äº **ESJZone** çš„ Tampermonkey è„šæœ¬ã€‚  
åœ¨å°è¯´è¯¦æƒ…é¡µè‡ªåŠ¨æ³¨å…¥ **â€œå…¨æœ¬ä¸‹è½½â€** æŒ‰é’®ï¼Œæ”¯æŒï¼š

-  **TXT å¯¼å‡º**
-  **EPUB å¯¼å‡ºï¼ˆå«å°é¢ï¼‰**
-  **å¤šçº¿ç¨‹å¹¶å‘æŠ“å–**
-  **æ–­ç‚¹ç»­ä¼ ï¼ˆåŸºäº IndexedDB å®ç°ç¼“å­˜ï¼‰**
-  **æŠ“å–å®Œæ•´æ€§æ£€æŸ¥ä¸è‡ªåŠ¨è¡¥æ¼**
-  **æœ€å°åŒ–æ‰˜ç›˜æ¨¡å¼ï¼Œä¸å½±å“æµè§ˆ**

æŠ“å–é€»è¾‘éƒ¨åˆ†å‚è€ƒè‡ªï¼šhttps://github.com/ZALin/ESJ-novel-backup  

## å®‰è£…æ–¹å¼

### 1. å®‰è£… Tampermonkey

https://www.tampermonkey.net/

### 2. å®‰è£…è„šæœ¬

[ç‚¹å‡»è¿™é‡Œå®‰è£…è„šæœ¬](https://github.com/mikoto710/esj-novel-downloader/releases/latest/download/esj-novel-downloader.user.js)

æˆ–è¿›å…¥æœ¬é¡¹ç›® GitHub ä»“åº“çš„ Release è‡ªè¡Œå®‰è£…

## ä½¿ç”¨æ–¹æ³•

æ‰“å¼€ä»»æ„ ESJZone å°è¯´è¯¦æƒ…é¡µï¼ˆä¾‹ï¼š`https://www.esjzone.cc/detail/xxxx.html`ï¼‰

ä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªæ–°å¢æŒ‰é’®ï¼š

```
ğŸ“˜ å…¨æœ¬ä¸‹è½½
```

ç‚¹å‡»åä¼šï¼š

1. å‡ºç°ç¡®è®¤å¼¹çª—
2. ç‚¹å‡»ç¡®å®šå¼€å§‹æŠ“å–ï¼Œæ˜¾ç¤ºè¿›åº¦æ¡ä¸æ—¥å¿—  
3. æŠ“å–å®Œæˆåé€‰æ‹©å¯¼å‡ºï¼ˆTXT / EPUBï¼‰  


## é¡¹ç›®ç»“æ„

```
src
â”œâ”€â”€ core                 # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ epub.ts          # EPUB ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ scraper.ts       # çˆ¬è™«ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ state.ts         # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ storage.ts       # å­˜å‚¨å±‚
â”œâ”€â”€ ui                   # ç•Œé¢ä¸äº¤äº’
â”‚   â”œâ”€â”€ index.ts         # UI æ³¨å…¥å…¥å£
â”‚   â”œâ”€â”€ popups.ts        # å¼¹çª—ç»„ä»¶
â”‚   â”œâ”€â”€ styles.ts        # CSS æ ·å¼å®šä¹‰
â”‚   â””â”€â”€ tray.ts          # æœ€å°åŒ–æ‚¬æµ®çƒç»„ä»¶
â”œâ”€â”€ utils                # é€šç”¨å·¥å…·åº“
â”‚   â”œâ”€â”€ dom.ts           # DOM æ“ä½œ
â”‚   â”œâ”€â”€ index.ts         # åŸºç¡€å·¥å…·
â”‚   â””â”€â”€ text.ts          # æ–‡æœ¬å¤„ç†
â”œâ”€â”€ global.d.ts          # å…¨å±€ç±»å‹å£°æ˜
â”œâ”€â”€ index.ts             # é¡¹ç›®æ€»å…¥å£
â””â”€â”€ types.ts             # TypeScript ç±»å‹å®šä¹‰æ¥å£
```

## å¼€å‘ä¸æ„å»º

æœ¬é¡¹ç›®ä½¿ç”¨ **Rollup** å’Œ **ESBuild** è¿›è¡Œæ¨¡å—åŒ–æ„å»ºã€‚

### ç¯å¢ƒè¦æ±‚
- Node.js 14+
- npm

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨ç›‘å¬ï¼‰
```bash
npm run watch
```

### ç”Ÿäº§æ„å»º
```bash
npm run build
```

æ„å»ºåçš„è„šæœ¬ä½äºï¼š

```
dist/esj-novel-downloader.user.js
```
